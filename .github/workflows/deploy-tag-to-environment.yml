name: ðŸ§ª Manually deploy tag to a environment

on:
  workflow_dispatch:
    inputs:
      target-tag:
        description: "Tag to use"
        required: true
      target-env:
        description: "Environment to use"
        type: choice
        options:
          - development
          - testing
          - staging
          - production

jobs:
  deploy:
    runs-on: ubuntu-latest
    environment:
      name: ${{ github.event.inputs.target-env }}
    steps:
      - uses: actions/checkout@v4
      - shell: bash
        run: echo ${{ github.event.ref }}
      - shell: bash
        run: echo ${{ github.event.inputs.target-tag }}
      - shell: bash
        run: echo ${{ github.event.inputs.target-env }}

      - uses: ./.github/actions/deploy-swa
        with:
          deployment-token: secrets.DEPLOYMENT_TOKEN
          github-token: secrets.GITHUB_TOKEN
          ref: github.event.ref